// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`fetchClusterReplicaMetrics > should throw if start date is after end date in dateRange 1`] = `
{
  "parameters": [
    "u1",
  ],
  "sql": "select "cr"."id", "cr"."name", "cr"."size", "crs"."cpu_nano_cores" * "crs"."processes" as "cpuNanoCores", "crs"."memory_bytes" * "crs"."processes" as "memoryBytes", "crs"."disk_bytes" * "crs"."processes" as "diskBytes", COALESCE(crhm.heap_bytes::bigint, 0) as "heapBytes", "cru"."cpu_percent" as "cpuPercent", "cru"."memory_percent" as "memoryPercent", "cru"."disk_percent" as "diskPercent", "cru"."heap_percent" as "heapPercent" from "mz_cluster_replicas" as "cr" inner join "mz_cluster_replica_sizes" as "crs" on "crs"."size" = "cr"."size" inner join (select "replica_id", SUM(cru.cpu_percent) / COUNT(process_id) as "cpu_percent", SUM(cru.memory_percent) / COUNT(process_id) as "memory_percent", SUM(cru.disk_percent) / COUNT(process_id) as "disk_percent", MAX(cru.heap_percent) as "heap_percent" from "mz_cluster_replica_utilization" as "cru" group by "replica_id", "process_id") as "cru" on "cr"."id" = "cru"."replica_id" left join (select "crm"."replica_id", MAX(crm.heap_limit) as "heap_limit", MAX(crm.heap_bytes) as "heap_bytes" from "mz_cluster_replica_metrics" as "crm" group by "crm"."replica_id") as "crhm" on "crhm"."replica_id" = "cr"."id" where "cr"."cluster_id" = $1 order by "cr"."id"",
}
`;
