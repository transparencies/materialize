{{ define "main"}}

{{ if not (.Params.disable_h1) }}
  <div class="title-row">
    <h1>{{.Title}}</h1>
    {{- $basePath := (urls.Parse site.BaseURL).Path -}}
    {{- if not (strings.HasSuffix $basePath "/") -}}{{- $basePath = printf "%s/" $basePath -}}{{- end -}}
    {{- $pagePath := .RelPermalink | strings.TrimPrefix $basePath -}}
    {{- $mdURL := printf "%smarkdown-docs/%sindex.md" $basePath $pagePath -}}
    <a class="btn-ghost" href="{{ $mdURL }}">View as Markdown</a>
  </div>
{{ end }}

{{ .Content }}

{{ if not (.Params.disable_list) }}
{{ range .Pages.ByWeight }}
<li>
  <a href="{{.Permalink}}">{{.Title}}</a>
</li>
{{ end }}{{/*  {{ range .Pages.ByWeight }} */}}
{{ end }}{{/*  {{ if not (.Params.disable_list) }} */}}

{{ end }}{{/*  {{ define "main"}} */}}
